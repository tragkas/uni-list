<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  
    <!-- SEO Optimization -->
  <meta name="description" content="Explore and compare Greek universities by ranking, rent, student satisfaction, internet speed, and more. Filter and view details with photos, website, and eClass links.">
  <meta name="keywords" content="Greek universities, university ranking Greece, student satisfaction Greece, rent prices Greece, internet speed Greece, university comparison, higher education Greece">
  <meta name="author" content="University Explorer Team">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://tragkas.github.io/uni-list/">

  <!-- Open Graph for Social Sharing -->
  <meta property="og:title" content="Greek University Explorer - Compare Rankings, Rent & Satisfaction">
  <meta property="og:description" content="Filter, compare, and explore Greek universities with rankings, rent prices, satisfaction scores, internet speed, and more. View photos, website, and eClass links.">
  <meta property="og:image" content="https://tragkas.github.io/uni-list/public/uni-list.png">
  <meta property="og:url" content="https://tragkas.github.io/uni-list/">
  <meta property="og:type" content="website">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Greek University Explorer">
  <meta name="twitter:description" content="Discover and compare Greek universities with rankings, rent prices, student satisfaction, and more.">
  <meta name="twitter:image" content="https://tragkas.github.io/uni-list/public/uni-list.png">

  <!-- JSON-LD Structured Data for Rich Results -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Greek University Explorer",
    "url": "https://yourdomain.com/greek-university-explorer",
    "description": "Filter and compare Greek universities by ranking, rent, student satisfaction, internet speed, and more. Includes photos, website links, and eClass portals.",
    "applicationCategory": "EducationApplication",
    "operatingSystem": "All",
    "author": {
      "@type": "Organization",
      "name": "University Explorer Team"
    },
    "image": "https://yourdomain.com/preview-image.jpg",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://yourdomain.com/greek-university-explorer?search={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>
  
  <title>University Explorer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .filter-btn.active {
      background-color: #3b82f6; /* Tailwind blue-500 */
      color: white;
      border-color: #3b82f6;
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-800">
  <div class="flex flex-col lg:flex-row min-h-screen">

    <!-- Sidebar -->
    <aside class="lg:w-72 w-full bg-white p-4 shadow-sm overflow-y-auto">
      <h2 class="text-xl font-bold mb-4">ğŸ” Filters</h2>
      <div class="space-y-3 mb-6">
        <button id="clear-filters" class="w-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600 transition">ğŸ§¹ Clear All Filters</button>
        <a href="https://docs.google.com/forms/d/e/1FAIpQLSfynBE8_qfoU-aFCNjOzAsxMdLuJr4mtqZgWvObW3T6RpWdnQ/viewform?usp=dialog" target="_blank"
          class="block w-full text-center bg-blue-400 text-white py-2 rounded hover:bg-blue-500 transition">ğŸ“¥ Submit Your Uni Satisfaction</a>
      </div>
      <div id="filters" class="space-y-6"></div>
    </aside>

    <!-- Main -->
    <main class="flex-1 p-6 overflow-y-auto">
      <div class="flex items-center justify-between mb-6">
        <h1 class="text-3xl font-bold">ğŸ“ Greek University Explorer</h1>
        <select id="view-select" class="border border-gray-300 rounded px-3 py-1">
          <option value="grid">Grid View</option>
          <option value="table">Table View</option>
        </select>
      </div>
      <div id="grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
      <div id="table" class="hidden overflow-x-auto"></div>
    </main>
  </div>

  <!-- Expanded -->
  <div id="expanded" class="hidden fixed inset-0 bg-white z-50 overflow-y-auto p-6"></div>

  <script>
    const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQZxm4efvtDGrarm7O7Ckb8JamHlbIXlLqlr8R1D0k4jJC6YvP6bpoRT1bDyh55tpiUuCWzOTIylclc/pub?output=csv';
    let universityData = [];
    let activeFilters = {};

    const filterCategories = {
      city: 'City',
      ranking: 'Ranking',
      rent: 'Average Rent for 40 mÂ²',
      satisfaction: 'Student Satisfaction',
      speed: 'Internet Speed',
      weather: 'Weather (Avg)',
    };

    function createFilterButtons(data) {
      const filtersEl = document.getElementById('filters');
      filtersEl.innerHTML = '';
      Object.entries(filterCategories).forEach(([key, label]) => {
        const group = document.createElement('div');
        group.innerHTML = `<h3 class="text-lg font-semibold mb-2">${label}</h3>`;
        const values = [...new Set(data.map(d => d[key]).filter(v => v && v !== '#N/A'))].sort((a, b) => {
          const na = isNaN(parseFloat(a)), nb = isNaN(parseFloat(b));
          if (!na && !nb) return parseFloat(a) - parseFloat(b);
          return a.localeCompare(b);
        });

        const btnContainer = document.createElement('div');
        btnContainer.className = 'flex flex-wrap gap-2';
        values.forEach(value => {
          const btn = document.createElement('button');
          btn.className = 'filter-btn px-2 py-1 text-sm rounded border border-gray-300';
          btn.textContent = value;
          btn.addEventListener('click', () => {
            btn.classList.toggle('active');
            if (!activeFilters[key]) activeFilters[key] = new Set();
            if (btn.classList.contains('active')) {
              activeFilters[key].add(value);
            } else {
              activeFilters[key].delete(value);
              if (activeFilters[key].size === 0) delete activeFilters[key];
            }
            renderView();
          });
          btnContainer.appendChild(btn);
        });
        group.appendChild(btnContainer);
        filtersEl.appendChild(group);
      });
    }

    function matchesFilters(item) {
      return Object.entries(activeFilters).every(([key, values]) => values.has(item[key]));
    }

    function renderGrid() {
      const grid = document.getElementById('grid');
      grid.innerHTML = '';
      const filtered = universityData.filter(matchesFilters);
      filtered.forEach(item => {
        const card = document.createElement('div');
        card.className = 'bg-white rounded-xl shadow hover:shadow-lg cursor-pointer overflow-hidden transition';
        card.innerHTML = `
          <img src="${item.photo}" alt="${item.university}" class="w-full h-40 object-cover">
          <div class="p-4">
            <h2 class="text-lg font-semibold">${item.university}</h2>
            <p class="text-sm text-gray-500">${item.city}</p>
            <p class="mt-2 text-sm">ğŸ… ${item.ranking} | ğŸ  â‚¬${item.rent}</p>
            <p class="text-sm">ğŸ˜„ ${item.satisfaction}/5 | âš¡ ${item.speed} Mbps</p>
            <p class="text-sm">ğŸŒ¡ï¸ ${item.weather}</p>
          </div>
        `;
        card.addEventListener('click', () => showExpanded(item));
        grid.appendChild(card);
      });
    }

    function renderTable() {
      const tableEl = document.getElementById('table');
      const filtered = universityData.filter(matchesFilters);
      let html = `<table class="min-w-full border border-gray-300 bg-white text-sm">
        <thead class="bg-gray-100">
          <tr>
            <th class="border px-3 py-2">University</th>
            <th class="border px-3 py-2">City</th>
            <th class="border px-3 py-2">Ranking</th>
            <th class="border px-3 py-2">Rent (â‚¬)</th>
            <th class="border px-3 py-2">Satisfaction</th>
            <th class="border px-3 py-2">Speed (Mbps)</th>
            <th class="border px-3 py-2">Weather</th>
          </tr>
        </thead>
        <tbody>`;
      filtered.forEach(item => {
        html += `<tr class="hover:bg-gray-50 cursor-pointer" onclick="showExpandedFromTable(${item.id})">
          <td class="border px-3 py-2">${item.university}</td>
          <td class="border px-3 py-2">${item.city}</td>
          <td class="border px-3 py-2">${item.ranking}</td>
          <td class="border px-3 py-2">${item.rent}</td>
          <td class="border px-3 py-2">${item.satisfaction}/5</td>
          <td class="border px-3 py-2">${item.speed}</td>
          <td class="border px-3 py-2">${item.weather}</td>
        </tr>`;
      });
      html += `</tbody></table>`;
      tableEl.innerHTML = html;
    }

    function renderView() {
      const view = document.getElementById('view-select').value;
      document.getElementById('grid').classList.toggle('hidden', view !== 'grid');
      document.getElementById('table').classList.toggle('hidden', view !== 'table');
      if (view === 'grid') renderGrid();
      else renderTable();
    }

    function showExpanded(item) {
      const expanded = document.getElementById('expanded');
      expanded.classList.remove('hidden');
      expanded.innerHTML = `
        <button onclick="closeExpanded()" class="text-blue-600 mb-4 hover:underline">â† Back</button>
        <img src="${item.photo}" class="w-full h-64 object-cover rounded-xl mb-4" />
        <h2 class="text-3xl font-bold mb-2">${item.university}</h2>
        <div class="grid grid-cols-2 gap-4 text-lg">
          <div><strong>ğŸ™ï¸ City:</strong> ${item.city}</div>
          <div><strong>ğŸ… Ranking:</strong> ${item.ranking}</div>
          <div><strong>ğŸ  Rent:</strong> â‚¬${item.rent}</div>
          <div><strong>ğŸ˜„ Satisfaction:</strong> ${item.satisfaction}/5</div>
          <div><strong>âš¡ Internet:</strong> ${item.speed} Mbps</div>
          <div><strong>ğŸŒ¡ï¸ Weather:</strong> ${item.weather}</div>
          <div><strong>ğŸŒ Website:</strong> <a href="${item.website}" target="_blank" class="text-blue-500 underline">Visit</a></div>
          <div><strong>ğŸ’» Eclass:</strong> <a href="${item.eclass}" target="_blank" class="text-blue-500 underline">Access</a></div>
        </div>
      `;
    }

    function closeExpanded() {
      document.getElementById('expanded').classList.add('hidden');
      document.getElementById('expanded').innerHTML = '';
    }

    function showExpandedFromTable(id) {
      const item = universityData.find(u => u.id == id);
      showExpanded(item);
    }

    function clearAllFilters() {
      activeFilters = {};
      document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
      renderView();
    }

    document.getElementById('clear-filters').addEventListener('click', clearAllFilters);
    document.getElementById('view-select').addEventListener('change', renderView);

    fetch(csvUrl)
      .then(res => res.text())
      .then(text => {
        const rows = text.trim().split('\n').slice(1);
        universityData = rows.map(row => {
          const cols = row.split(',');
          return {
            id: cols[0],
            university: cols[1],
            city: cols[2],
            ranking: cols[3],
            rent: cols[4],
            satisfaction: cols[5],
            speed: cols[6],
            weather: cols[7],
            photo: cols[8],
            website: cols[9],
            eclass: cols[10]
          };
        });
        createFilterButtons(universityData);
        renderView();
      });
  </script>
</body>
</html>
